<html>
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<script type="module">
			import init, {compile} from './pkg/edit_fractal.js';

			async function run() {
				await init();
				document.getElementById('run_button').onclick = async() => {
					const text = document.getElementById('formula').value;
					const program = compile(text);
					console.log(program);
					const mod = await WebAssembly.instantiate(program, {});
					console.log(mod);
					console.log(mod.instance.exports.return_thing());
				};
			}
			run();
		</script>
		<div>
		<input type="text" id="formula">
		</div>
		<div>
			<input type="button" id="run_button" value="Run">
		</div>
	</body>
</html>
